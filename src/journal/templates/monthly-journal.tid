title: $:/plugins/mblackman/journal/ui/templates/monthly-journal
type: text/vnd.tiddlywiki

\whitespace trim

<$let 
  currentTiddler={{{ [<storyTiddler>!is[blank]else<currentTiddler>] }}}
  matchTitle={{{ [<storyTiddler>!is[blank]else<currentTiddler>] }}}
>

<<journal-nav "Monthly" """
  <$let 
    yearTitle={{!!year}}
  >
  <$list filter="[<yearTitle>!is[blank]]" variable="ignore">
    <$let tags={{{ [[Journal]] [[Yearly]] +[join[ ]] }}}>
      <div class="journal-header-container">
        <$macrocall $name="journal-parent-btn" target=<<yearTitle>> label=<<yearTitle>> tags=<<tags>> tooltip="Open Yearly Review" journalDate=<<now "YYYY0101120000000">> />
      </div>
    </$let>
  </$list>
  </$let>
""">>

<h3>âœ¨ Monthly Reflection</h3>

<div class="journal-section">
  <div class="journal-section-tight">
      <span class="journal-label">ğŸ† Big Wins</span>
      <$edit-text field="highlight" class="tc-edit-texteditor journal-input" placeholder="What were my big wins this month?" />
  </div>
  <div>
      <span class="journal-sublabel">Detailed Wins</span>
      <<journal-quick-add wins-log "Add a win...">>
      <$edit-text field="wins-log" class="tc-edit-texteditor journal-input" tag="textarea" min-height="80px" placeholder="..." />
  </div>
</div>

<div class="journal-section">
  <div class="journal-section-tight">
      <span class="journal-label">ğŸ“‰ Challenges</span>
      <$edit-text field="lowlight" class="tc-edit-texteditor journal-input" placeholder="What challenges did I face?" />
  </div>
  <div>
      <span class="journal-sublabel">Detailed Challenges</span>
      <<journal-quick-add challenges-log "Add a challenge...">>
      <$edit-text field="challenges-log" class="tc-edit-texteditor journal-input" tag="textarea" min-height="80px" placeholder="..." />
  </div>
</div>

<div class="journal-section">
  <div class="journal-section-tight">
      <span class="journal-label">ğŸš€ Improvements</span>
      <$edit-text field="improvement-highlight" class="tc-edit-texteditor journal-input" placeholder="What could I improve next month?" />
  </div>
  <div>
      <span class="journal-sublabel">Detailed Improvements</span>
      <<journal-quick-add improvements-log "Add an improvement...">>
      <$edit-text field="improvements-log" class="tc-edit-texteditor journal-input" tag="textarea" min-height="80px" placeholder="..." />
  </div>
</div>

<hr style="border: 0; border-top: 1px solid <<colour table-border>>;">

<h3>ğŸ“Š Habits Summary</h3>

<<journal-grid
  gridClass:"journal-days-grid"
  filter:"[tag[Daily]tag[Journal]tag<matchTitle>sort[title]]"
  name:'<$text text={{{ [{!!title}split[-]join[]addsuffix[120000000]format:date[ddd]] }}}/>'
  date:'<$text text={{{ [{!!title}split[-]join[]addsuffix[120000000]format:date[0DD]] }}}/>'
>>

<$list filter="[[$:/config/Journal/EnableMedia]get[text]else[yes]!match[no]] :filter[[$:/plugins/mblackman/media-importer]!is[missing]]" variable="ignore">
  <h3>ğŸ¬ Media Consumption</h3>
  <<media-consumption-summary "[tag[Daily]tag[Journal]tag<matchTitle>]">>
</$list>

<h3>ğŸ—“ï¸ Month in Review</h3>

<h4>Daily Highlights</h4>
<div class="journal-section">
  <$list filter="[tag[Daily]tag[Journal]tag<matchTitle>sort[title]]">
    <$list filter="[all[current]has[highlight]] [all[current]has[lowlight]] +[limit[1]]" variable="ignore">
      <div style="margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px dashed <<colour table-border>>;">
        <div style="font-weight: bold; margin-bottom: 6px;">
          <$link to=<<currentTiddler>>><$text text={{{ [{!!title}split[-]join[]addsuffix[120000000]format:date[0DD ddd]] }}}/></$link>
        </div>
        <$list filter="[all[current]has[highlight]]">
          <div style="margin-bottom: 4px; display: flex; gap: 8px;">
            <span style="flex-shrink: 0;">ğŸ†</span> <span>{{!!highlight}}</span>
          </div>
        </$list>
        <$list filter="[all[current]has[lowlight]]">
          <div style="display: flex; gap: 8px;">
            <span style="flex-shrink: 0;">ğŸ“‰</span> <span>{{!!lowlight}}</span>
          </div>
        </$list>
      </div>
    </$list>
  </$list>
</div>

</$let>